id: order
name: Order Processing
version: "1.0"
start: ProcessOrder
dataInputSchema: input-schemas/order.json
# OpenAPI Functions mapped to my subflows
# The subflows.yaml file was generated by this Quarkus Application via the Swagger OpenAPI extension
# We kept only the subflows operations in the file since they are the ones we are using
functions:
  - name: fraudEvaluation
    operation: openapi/subflows.yaml#createResource_fraudhandling
  - name: shippingType
    operation: openapi/subflows.yaml#createResource_shippinghandling
states:
  - name: ProcessOrder
    type: operation
    actions:
      - functionRef:
          refName: fraudEvaluation
          arguments:
            total: ${ .total }
        actionDataFilter:
          results: .workflowdata
      - functionRef:
          refName: shippingType
          arguments:
            country: ${ .country }
        actionDataFilter:
          results: .workflowdata
    end: true