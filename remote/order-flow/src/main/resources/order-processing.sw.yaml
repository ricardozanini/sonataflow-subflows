id: order
name: Order Processing
version: "1.0"
start: ProcessOrder
dataInputSchema: schemas/input-order.json
extensions:
  - extensionid: workflow-output-schema
    outputSchema: schemas/output-order.json
# OpenAPI Functions mapped to my subflows
# The OpenAPI YAML files were generated by the Quarkus Application via the Swagger OpenAPI extension
functions:
  - name: fraudEvaluation
    operation: openapi/fraud.yaml#createResource_fraudhandling
  - name: shippingType
    operation: openapi/shipping.yaml#createResource_shippinghandling
states:
  - name: ProcessOrder
    type: parallel
    branches:
      - name: HandleFraudEvaluation
        actions:
          - functionRef:
              refName: fraudEvaluation
              arguments:
                total: ${ .total }
            actionDataFilter:
              results: .workflowdata
      - name: HandleShippingType
        actions:
          - functionRef:
              refName: shippingType
              arguments:
                country: ${ .country }
            actionDataFilter:
              results: .workflowdata
    end: true